# Группа 4. Travel: бронирования отелей

## Контекст задачи

Онлайн-платформа «YouTravel» отслеживает бронирования отелей и изменения в них.  

У каждого бронирования есть:

- информация о пользователе (id, имя)  
- отель и номер (id отеля, номер, категория)  
- даты проживания (начало, конец)  
- статус бронирования (активно, отменено, изменено)  
- тип тарифа (стандарт, премиум, делюкс)  

Бизнес-задачи:

1. Отслеживать текущий статус бронирования  
2. Вести историю изменений бронирований (перенос даты, смена номера, отмена)  
3. Анализировать поведение клиентов: как часто меняют бронирования, какие номера популярны, какие типы тарифов выбирают чаще всего  

## Возможные бизнес-сценарии

1. **Создание бронирования**  
   - Пользователь оформил бронирование на конкретные даты  
   - Важно зафиксировать дату создания и тип тарифа  

2. **Изменение бронирования**  
   - Пользователь меняет дату, номер или тариф  
   - Нужно сохранить историю всех изменений, чтобы видеть динамику  

3. **Отмена бронирования**  
   - Пользователь отменил бронирование  
   - Необходимо фиксировать дату и причину (если известна)  

4. **Продление проживания**  
   - Пользователь решает продлить пребывание  
   - История должна отражать новую дату окончания  

5. **Перенос номера**  
   - Пользователь меняет номер в том же отеле  
   - История должна фиксировать старый и новый номер  

6. **Популярность и анализ**  
   - Какие номера и тарифы выбирают чаще всего  
   - Сколько бронирований отменяется по типу тарифа или по отелю  

## Что требуется

1. Построить схему хранения данных так, чтобы:

   - можно было видеть текущий статус бронирования  
   - можно было проследить всю историю изменений бронирований  
   - можно было анализировать поведение клиентов по типу тарифа, дате, отелю  

2. Сохранить возможность быстро отвечать на вопросы:

   - Сколько бронирований было отменено в этом месяце?  
   - Какие номера и тарифы популярны среди клиентов?  
   - Как часто клиенты меняют даты проживания или номер?  
   - Сколько бронирований продлевалось?  

3. Подготовить SQL-структуру таблиц и продумать механизм фиксации изменений  

4. Обосновать свой выбор:

   - Какие стратегии хранения истории вы выбрали (какие типы SCD)?  
   - Почему именно так?  
   - Какие плюсы и минусы у вашего решения?  

## Чек-лист сдачи задания

1. DDL всех таблиц и объяснение, зачем каждая нужна  
2. Несколько INSERT-ов, демонстрирующих кейсы: создание бронирования, изменение даты/номера/тарифа, отмена, продление  
3. SELECT-запросы: current view, история бронирований, анализ по тарифам, количественные показатели изменений  
4. Короткое обоснование выбора хранения истории (какие SCD использованы, почему)